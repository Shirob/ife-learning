<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
</head>
<body>            
    <div id="fade-obj" style="width:300px;height:300px;background:rgb(0, 0, 0)"></div>
    <button id="fade-btn">淡出</button>
    <script>
        var fade_obj = document.getElementById('fade-obj'),
            fade_btn = document.getElementById('fade-btn'),
            num = 10,
            flag = true,
            fadeText = '',
            insetIn = null;
        
        fade_btn.onclick = fadeCommon;

        function fadeCommon() {
            insetIn = setInterval(function() {
                fade_btn.disabled = true;
                if (flag) {
                    num--;
                } else {
                    num++;
                }
                fade_obj.style.opacity = num / 10;

                if (num <= 0 || num >= 10) {
                    clearInterval(insetIn);
                    fade_btn.disabled = false;
                    
                    if (num) {
                        fadeText = (flag = true) ? '淡出':'淡入';
                        fade_btn.innerHTML = fadeText;
                    } else {
                        fadeText = (flag = false) ? '淡出':'淡入';
                        fade_btn.innerHTML = fadeText;
                    }
                }
            }, 30);
        };

    </script>
</body>
</html>